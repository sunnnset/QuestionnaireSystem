(self.webpackChunkquestionairesystem=self.webpackChunkquestionairesystem||[]).push([[395,991],{5197:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(3645),s=i.n(n)()((function(e){return e[1]}));s.push([e.id,"\n.titleBlock[data-v-36a538a7],.questionBlock[data-v-36a538a7]{\r\n    margin: 20px 50px;\n}\n.button[data-v-36a538a7]{\r\n    width: 80px;\r\n    margin: 10px;\r\n    background-color: rgba(34, 123, 32,0.3);\r\n    border-radius: 2px;\r\n    box-shadow: -2px 2px 2px;\r\n    text-align: center;\n}\n#submitButton[data-v-36a538a7]{\r\n    widows: 800px;\r\n    text-align: center;\n}\r\n",""]);const o=s},7560:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(3645),s=i.n(n)()((function(e){return e[1]}));s.push([e.id,"\nimg[data-v-1a16674a]{\r\n    height: 20px;\r\n    width: 20px;\n}\r\n",""]);const o=s},9082:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(3645),s=i.n(n)()((function(e){return e[1]}));s.push([e.id,"\n#setting[data-v-0e125a7c]{\r\n    border: 2px dashed gray;\r\n    padding: 20px;\r\n    width: 800px;\r\n    margin-top:10px;\n}\nselect[data-v-0e125a7c]{\r\n    margin: 10px;\n}\nimg[data-v-0e125a7c]{\r\n    display:  inline-block;\r\n    height: 20px;\r\n    width: 20px;\r\n    margin: 10px;\n}\ninput[type~='text'][data-v-0e125a7c]{\r\n    width: 600px;\n}\ninput[type~='checkbox'][data-v-0e125a7c]{\r\n    display: inline-block;\r\n    margin: 20px;\n}\r\n",""]);const o=s},4790:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n=i.p+"img/delete.f2dace32.png"},3395:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>_});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"titleBlock"},[i("span",[e._v("问卷标题*: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),i("br"),i("br"),e._v(" "),i("span",[e._v("问卷描述: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],attrs:{type:"text"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),i("br"),i("br"),e._v(" "),i("span",[e._v("问卷是否实名填写: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.ifLogin,expression:"ifLogin"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.ifLogin)?e._i(e.ifLogin,null)>-1:e.ifLogin},on:{change:function(t){var i=e.ifLogin,n=t.target,s=!!n.checked;if(Array.isArray(i)){var o=e._i(i,null);n.checked?o<0&&(e.ifLogin=i.concat([null])):o>-1&&(e.ifLogin=i.slice(0,o).concat(i.slice(o+1)))}else e.ifLogin=s}}}),i("br"),i("br")]),e._v(" "),i("div",{staticClass:"questionBlock"},[e._l(e.newQuestions,(function(t,n){return i("question-setting",{key:n,attrs:{questionOrder:n+1},on:{deleteQuestion:e.deleteQuestion,submitQuestion:e.submitQuestion}})})),e._v(" "),i("div",{staticClass:"button",on:{click:e.addQuestion}},[e._v("添加问题")])],2),e._v(" "),i("div",{attrs:{id:"submitButton"},on:{click:e.submitQuestionnaire}},[e._v("生成问卷")])])};n._withStripped=!0;var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"setting"}},[i("img",{attrs:{src:e.trashbiin},on:{click:e.deleteQuestion}}),e._v(" "),i("img",{ref:"tick",attrs:{src:e.tick},on:{click:e.submit}}),e._v(" "),i("br"),e._v(" "),i("select",{attrs:{name:"Type",disabled:e.ifsubmit},on:{change:function(t){return e.watchChange(t)}}},[i("option",{attrs:{value:"single"}},[e._v("Single Options")]),e._v(" "),i("option",{attrs:{value:"multiple"}},[e._v("Multiple Options")]),e._v(" "),i("option",{attrs:{value:"open"}},[e._v("Open Question")]),e._v(" "),i("option",{attrs:{value:"file"}},[e._v("File Question")])]),e._v(" "),i("div",{attrs:{id:"description"}},[e._v("\n            Add Description: "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.questionInfo.description,expression:"questionInfo.description"}],attrs:{type:"text",disabled:e.ifsubmit},domProps:{value:e.questionInfo.description},on:{input:function(t){t.target.composing||e.$set(e.questionInfo,"description",t.target.value)}}})]),e._v(" "),i("div",{attrs:{id:"ifRequired"}},[e._v("\n            If Required: "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.questionInfo.required,expression:"questionInfo.required"}],attrs:{type:"checkbox",disabled:e.ifsubmit},domProps:{checked:Array.isArray(e.questionInfo.required)?e._i(e.questionInfo.required,null)>-1:e.questionInfo.required},on:{change:function(t){var i=e.questionInfo.required,n=t.target,s=!!n.checked;if(Array.isArray(i)){var o=e._i(i,null);n.checked?o<0&&e.$set(e.questionInfo,"required",i.concat([null])):o>-1&&e.$set(e.questionInfo,"required",i.slice(0,o).concat(i.slice(o+1)))}else e.$set(e.questionInfo,"required",s)}}})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.seletedType||1==e.seletedType,expression:"seletedType==0||seletedType==1"}],attrs:{id:"addOptions"}},[e._v("Add Option:\n            "),i("options-block",{attrs:{optionsList:e.optionsList,submit:e.ifsubmit},on:{getOptions:e.getChoices}})],1)])};s._withStripped=!0;var o=i(4790);const r=i.p+"img/Tick.3764a96e.png";var a=i(2991);const u={name:"questionSetting",props:{questionOrder:{type:Number,default:()=>1}},components:{optionsBlock:a.default},data(){return{optionsList:[],ifsubmit:!1,tick:r,trashbiin:o.Z,seletedType:0,questionInfo:{answerType:null,choices:"",description:"",fileType:null,isMultipleChoice:!1,questionID:null,questionOrder:this.questionOrder,questionType:"CH",questionnaireID:null,required:!1}}},methods:{deleteQuestion(){this.$emit("deleteQuestion",this.questionOrder)},watchChange(e){this.seletedType=e.target.options.selectedIndex},submit(){0!=this.questionInfo.description.length?this.seletedType<=1&&0==this.questionInfo.choices.length?alert("请添加问题选项"):(this.ifsubmit=!0,this.$refs.tick.style.display="none",this.$emit("submitQuestion",this.questionInfo)):alert("请加入问题描述")},getChoices(e){this.questionInfo.choices=e.join(":")}},watch:{seletedType(e,t){switch(this.questionInfo.fileType=null,this.questionInfo.description="",this.questionInfo.choices="",this.questionInfo.isMultipleChoice=!1,e){case 0:this.questionInfo.questionType="CH";break;case 1:this.questionInfo.isMultipleChoice=!0,this.questionInfo.questionType="CH";break;case 2:this.questionInfo.questionType="OP";break;case 3:this.questionInfo.questionType="FL"}}}};var l=i(3379),c=i.n(l),d=i(9082);c()(d.Z,{insert:"head",singleton:!1}),d.Z.locals;var p=i(1900),h=(0,p.Z)(u,s,[],!1,null,"0e125a7c",null);h.options.__file="src/components/questionsType/questionSetting.vue";const m=h.exports;var v=i(9669),g=i.n(v);const f={name:"createQuestionnaire",data:()=>({title:"",description:"",questionnaire:{},ifLogin:!1,newQuestions:[],currentQuestion:{}}),components:{questionSetting:m},methods:{addQuestion(){this.newQuestions.push(1)},deleteQuestion(e){this.newQuestions.splice(e-1,1)},submitQuestion(e){let t=e.questionOrder;this.newQuestions[t-1]=e},submitQuestionnaire(){if(0!=this.title.length)if(0!=this.newQuestions.length){for(let e in this.newQuestions)if("object"!=typeof this.newQuestions[e])return void alert(`please submit the Question${Number(e)+1}`);g()({method:"post",url:"http://"+this.$store.getters.showIp+"/questionnaire/add",data:{createDate:Date.now(),description:this.description,needLogin:this.ifLogin,questionnaireID:null,questions:this.newQuestions,title:this.title,userID:localStorage.getItem("userID")},headers:{token:localStorage.getItem("token")}}).then((e=>{this.$router.push("/questionnaire?id="+e.data.qid)})).catch((e=>{alert("用户身份已过期，重新登录"),localStorage.removeItem("token"),localStorage.removeItem("userID"),localStorage.removeItem("userName"),this.$router.push("/LoginPage")}))}else alert("当前问卷尚未添加问题");else alert("请输入问卷标题")}},created(){localStorage.getItem("token")||this.$router.push("/LoginPage")}};var q=i(5197);c()(q.Z,{insert:"head",singleton:!1}),q.Z.locals;var b=(0,p.Z)(f,n,[],!1,null,"36a538a7",null);b.options.__file="src/components/createQuestionnaire.vue";const _=b.exports},2991:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"optionsBlock"}},[i("img",{directives:[{name:"show",rawName:"v-show",value:!e.submit,expression:"!submit"}],attrs:{src:e.add},on:{click:e.addItem}}),e._v(" "),e._l(e.optionsList,(function(t,n){return i("div",{staticClass:"input"},[i("img",{directives:[{name:"show",rawName:"v-show",value:!e.submit,expression:"!submit"}],attrs:{src:e.minus},on:{click:function(t){return e.deleteItem(n)}}}),e._v(" "),i("input",{attrs:{type:"text",disabled:e.submit},domProps:{value:t},on:{change:function(t){return e.update(t,n)}}})])}))],2)};n._withStripped=!0;const s=i.p+"img/add.818666e7.png",o=i.p+"img/minus.c4d45f7d.png",r={name:"optionsBlock",props:{optionsList:{typ:Array,default:()=>["input1","input2"]},submit:{type:Boolean,default:()=>!1}},data:()=>({minus:o,add:s}),methods:{addItem(){this.optionsList.push("")},deleteItem(e){this.optionsList.splice(e,1)},update(e,t){this.optionsList[t]=e.target.value,this.$emit("getOptions",this.optionsList)}},watch:{submit(e,t){e&&this.$emit("getOptions",this.optionsList)}}};var a=i(3379),u=i.n(a),l=i(7560);u()(l.Z,{insert:"head",singleton:!1}),l.Z.locals;var c=(0,i(1900).Z)(r,n,[],!1,null,"1a16674a",null);c.options.__file="src/components/questionsType/optionsManage.vue";const d=c.exports}}]);