(self.webpackChunkquestionairesystem=self.webpackChunkquestionairesystem||[]).push([[797],{9013:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(3645),s=i.n(n)()((function(e){return e[1]}));s.push([e.id,"\n*[data-v-be8d6f7a]{\r\n    line-height: 30px;\r\n    vertical-align: middle;\n}\nh3[data-v-be8d6f7a]{\r\n    text-align: center;\n}\n.question[data-v-be8d6f7a]{\r\n    width: 1500px;\r\n    margin: 20px auto;\r\n    margin-left: 5%;\r\n    border: 2px rgba(2,3,5,0.3) dashed;\r\n    padding: 20px;\n}\n.question-icon[data-v-be8d6f7a]{\r\n    height: 30px;\r\n    width: 30px;\n}\nbutton[data-v-be8d6f7a]{\r\n    margin-left:750px;\n}\r\n",""]);const o=s},3797:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h3",[e._v(e._s(e.title))]),e._v(" "),e._l(e.questions,(function(t){return i("div",{staticClass:"question"},[i("img",{staticClass:"question-icon",attrs:{src:e.questionIcon}}),e._v("\r\n        "+e._s(t.required?"*":"")+"\r\n        "+e._s(t.questionOrder)+" : "+e._s(t.description)),i("br"),e._v(" "),i("multiple-question",{attrs:{item:t},on:{finishedStatus:e.ifFinished}}),e._v(" "),i("singleQuestion",{attrs:{item:t},on:{finishedStatus:e.ifFinished}}),e._v(" "),i("open-question",{attrs:{item:t},on:{finishedStatus:e.ifFinished}}),e._v(" "),i("file-question",{attrs:{item:t},on:{finishedStatus:e.ifFinished}})],1)})),e._v(" "),i("button",{on:{click:e.uploadQuestionnaire}},[e._v("提交问卷")])],2)};n._withStripped=!0;var s=i(9669),o=i.n(s);const a=i.p+"img/question.4ab5f04a.png",r={name:"questionnaire",data:()=>({finishedQuestion:{answerID:"",questionnaireID:"",userID:"",answerDate:"",answers:[]},ip:"",questionnaireId:"",questions:[],userid:"",title:"",description:"",questionIcon:a}),created(){let e=this;this.questionnaireId=location.search.slice(1).split("=")[1],e.finishedQuestion.questionnaireID=location.search.slice(1).split("=")[1],this.questionnaireId&&(this.ip=this.$store.getters.showIp,o()({method:"get",url:"http://"+this.ip+"/questionnaire/get?id="+this.questionnaireId}).then((t=>{t.data.needLogin&&!localStorage.getItem("token")&&this.$router.push("/LoginPage"),e.questions=t.data.questions;for(let t of e.questions)e.finishedQuestion.answers.push({});e.userid=t.data.userID,e.title=t.data.title,e.description=t.data.description})).catch((e=>{alert("请求错误")})))},methods:{getAllChioces:e=>e.choices?e.choices.split(":"):[],uploadQuestionnaire(){this.checkAll()?(this.finishedQuestion.userID=localStorage.getItem("userID"),this.finishedQuestion.answerDate=Date.now(),console.log(JSON.stringify(this.finishedQuestion)),o()({method:"post",url:"http://"+this.ip+"/questionnaireAnswer/add",data:this.finishedQuestion}).then((e=>{alert("您已成功提交，感谢您的支持"),this.$router.push("/MainPage")})).catch((e=>{alert("请求错误")}))):console.log("请检查是否有题目未完成填写")},checkAll(){let e=!0;for(let t of this.questions)t.required&&(e=e&&this.finishedQuestion[t.questionOrder]);return e},ifFinished(e,t,i){this.finishedQuestion[e]=t,this.finishedQuestion.answers[e-1]=i}},components:{multipleQuestion:()=>i.e(654).then(i.bind(i,654)),singleQuestion:()=>i.e(170).then(i.bind(i,3170)),openQuestion:()=>i.e(287).then(i.bind(i,8287)),fileQuestion:()=>i.e(494).then(i.bind(i,4494))}};var u=i(3379),d=i.n(u),h=i(9013);d()(h.Z,{insert:"head",singleton:!1}),h.Z.locals;var l=(0,i(1900).Z)(r,n,[],!1,null,"be8d6f7a",null);l.options.__file="src/components/questionnaire.vue";const c=l.exports}}]);