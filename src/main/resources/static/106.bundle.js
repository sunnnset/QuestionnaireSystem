(self.webpackChunkquestionairesystem=self.webpackChunkquestionairesystem||[]).push([[106],{1727:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,"\n#questionnaireList[data-v-24282010]{\n    margin: 0 auto;\n    width: 100%;\n    display: flex;\n}\n#left[data-v-24282010],#right[data-v-24282010]{\n    margin: 20px;\n    border: 3px dashed rgba(12,35,62,0.4);\n    border-radius: 10px;\n}\ntable[data-v-24282010]{\n    margin: 200px auto;\n    margin-top:30px;\n}\nh3[data-v-24282010]{\n    margin-top:100px;\n    text-align: center;\n}\nimg[data-v-24282010]{\n    height: 20px;\n    width: 20px;\n}\n/* table,tr,th{\n    border: 1px solid black;\n} */\n.head[data-v-24282010]{\n    background-color:aquamarine\n}\n",""]);const i=r},4790:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"img/delete.f2dace32.png"},3106:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"questionnaireList"}},[n("div",{attrs:{id:"left"}},[n("h3",[e._v("USER:"+e._s(e.userName)+"--创建的问卷清单")]),e._v(" "),n("table",[e._m(0),e._v(" "),e._l(e.questionnaires,(function(t){return n("tr",[n("th",{attrs:{width:"1%"},on:{click:function(n){return e.deleteQuestionnaire(t.questionnaireID)}}},[n("img",{attrs:{src:e.setting,title:"删除问卷"}})]),e._v(" "),n("th",{attrs:{width:"2%"},on:{click:function(n){return e.analyzeQuestionnaire(t.questionnaireID)}}},[n("img",{attrs:{src:e.analyze,title:"问卷数据统计"}})]),e._v(" "),n("th",{staticStyle:{"text-decoration":"underline"},attrs:{width:"10%"},on:{click:function(n){return e.visitQuestionnaire(t.questionnaireID)}}},[e._v("\n                        "+e._s(t.questionnaireID)+"\n                    ")]),e._v(" "),n("th",{attrs:{width:"20%"}},[e._v(e._s(t.title))]),e._v(" "),n("th",{attrs:{width:"20%"}},[e._v(e._s(t.description))]),e._v(" "),n("th",{attrs:{width:"20%"}},[e._v(e._s(new Date(t.createDate)))]),e._v(" "),n("th",{attrs:{width:"10%"}},[e._v(e._s(t.needLogin))])])}))],2)]),e._v(" "),n("div",{attrs:{id:"right"}},[n("h3",[e._v("USER:"+e._s(e.userName)+"--回答过的问卷清单")]),e._v(" "),n("table",[e._m(1),e._v(" "),e._l(e.allFinishedQuestionnaires,(function(t){return n("tr",[n("th",{attrs:{width:"1%"},on:{click:function(n){return e.deleteAnswer(t.answerID)}}},[n("img",{attrs:{src:e.setting,title:"删除回答"}})]),e._v(" "),n("th",{staticStyle:{"text-decoration":"underline"},on:{click:function(n){return e.showAnswers(t.answerID,t.questionnaireID)}}},[e._v(e._s(t.answerID))]),e._v(" "),n("th",[e._v(e._s(t.questionnaireID))]),e._v(" "),n("th",[e._v(e._s(new Date(t.answerDate)))])])}))],2)])])};a._withStripped=!0;var r=n(9669),i=n.n(r),s=n(4790);const o=n.p+"img/analyse.811cc41d.png",l={name:"mainPage",data:()=>({userName:localStorage.getItem("userName"),questionnaires:"",analyze:o,setting:s.Z,allFinishedQuestionnaires:""}),created(){localStorage.getItem("token")||this.$router.push("/LoginPage"),i()({method:"get",url:"http://"+this.$store.getters.showIp+"/questionnaire/getBodiesByUID?uid="+localStorage.getItem("userID"),headers:{token:localStorage.getItem("token")}}).then((e=>{this.questionnaires=e.data})).catch((e=>{alert("身份验证已过期"),localStorage.removeItem("token"),localStorage.removeItem("userID"),localStorage.removeItem("userName"),this.$router.push("/LoginPage")})),i()({method:"get",url:"http://"+this.$store.getters.showIp+"/questionnaireAnswer/getBodiesByUID?uid="+localStorage.getItem("userID"),headers:{token:localStorage.getItem("token")}}).then((e=>{this.allFinishedQuestionnaires=e.data})).catch((e=>{localStorage.removeItem("token"),localStorage.removeItem("userID"),localStorage.removeItem("userName"),this.$router.push("/LoginPage")}))},methods:{visitQuestionnaire(e){this.$router.push("/questionnaire?id="+e)},deleteQuestionnaire(e){confirm("确定要删除该问卷吗？")&&i()({method:"get",url:"http://"+this.$store.getters.showIp+"/questionnaire/delete?id="+e,headers:{token:localStorage.getItem("token")}}).then((t=>{this.questionnaires=this.questionnaires.filter(((t,n)=>t.questionnaireID!=e)),this.allFinishedQuestionnaires=this.allFinishedQuestionnaires.filter(((t,n)=>t.questionnaireID!=e))})).catch((e=>{alert("身份验证已过期"),localStorage.removeItem("token"),localStorage.removeItem("userID"),localStorage.removeItem("userName"),this.$router.push("/LoginPage")}))},showAnswers(e,t){this.$router.push("/visitAnswer?answerID="+e+"&questiannaireId="+t)},analyzeQuestionnaire(e){this.$router.push("/analyze?id="+e)},deleteAnswer(e){confirm("确定要删除该回答吗？")&&i()({method:"get",url:"http://"+this.$store.getters.showIp+"/questionnaireAnswer/delete?id="+e,headers:{token:localStorage.getItem("token")}}).then((t=>{this.allFinishedQuestionnaires=this.allFinishedQuestionnaires.filter(((t,n)=>t.answerID!=e))})).catch((e=>{alert("身份验证已过期"),localStorage.removeItem("token"),localStorage.removeItem("userID"),localStorage.removeItem("userName"),this.$router.push("/LoginPage")}))}}};var h=n(3379),u=n.n(h),c=n(1727);u()(c.Z,{insert:"head",singleton:!1}),c.Z.locals;var d=(0,n(1900).Z)(l,a,[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{staticClass:"head"},[n("th",[e._v("Delete")]),e._v(" "),n("th",[e._v("Statistical Analysis")]),e._v(" "),n("th",[e._v("questionnaireID")]),e._v(" "),n("th",[e._v("title")]),e._v(" "),n("th",[e._v("description")]),e._v(" "),n("th",[e._v("createDate")]),e._v(" "),n("th",[e._v("needLogin")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{staticClass:"head"},[n("th",[e._v("Delete")]),e._v(" "),n("th",[e._v("answerID")]),e._v(" "),n("th",[e._v("questionnaireID")]),e._v(" "),n("th",[e._v("answerDate")])])}],!1,null,"24282010",null);d.options.__file="src/components/mainPage.vue";const v=d.exports}}]);